"use strict";var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Super=function(){function e(){_classCallCheck(this,e),this.event={},this.eventOne={}}return _createClass(e,[{key:"_bind",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments[3],c=i[e];c||(c=[],i[e]=c),c.push({minNum:t,triggerNum:0,fn:n})}},{key:"_cancel",value:function(e,n,t){var i=t[e];i&&(n&&n>=1?i.splice(n-1,1,{fn:function(){}}):i.length=0)}},{key:"_cancelAll",value:function(e){Object.keys(e).forEach(function(n){e[n].length=0})}},{key:"_trigger",value:function(e,n,t,i){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=i[e];r&&(r.forEach(function(e){e.triggerNum++,e.triggerNum>=e.minNum&&e.fn(n),"function"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()&&(e.data=n,t(e))}),c&&(r.length=0))}},{key:"on",value:function(e,n,t){this._bind(e,n,t,this.event)}},{key:"one",value:function(e,n){this._bind(e,n,1,this.eventOne)}},{key:"off",value:function(e,n){e?(this._cancel(e,n,this.event),this._cancel(e,n,this.eventOne)):(this._cancelAll(this.event),this._cancelAll(this.eventOne))}},{key:"emit",value:function(e,n,t){this._trigger(e,n,t,this.event),this._trigger(e,n,t,this.eventOne,!0)}}]),e}();module.exports=new Super;
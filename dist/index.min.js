"use strict";var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}!function(e,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):window&&("object"!==Object.prototype.toString.call(window.zhf).slice(8,-1).toLowerCase()&&(window.zhf={}),window.zhf.EventEmitter=n())}(0,function(){return function(){function e(){_classCallCheck(this,e),this.event={},this.eventOne={}}return _createClass(e,[{key:"_bind",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments[3],i=o[e];i||(i=[],o[e]=i),i.push({isDel:!1,minNum:t,triggerNum:0,fn:n})}},{key:"_cancel",value:function(e,n,t){var o=t[e];o&&(n&&n>=1?o.splice(n-1,1,{isDel:!0,fn:function(){}}):o.length=0)}},{key:"_cancelAll",value:function(e){Object.keys(e).forEach(function(n){e[n].length=0})}},{key:"_trigger",value:function(e,n,t,o,i){var a=o[e];if(a&&(a.allData||(a.allData=[]),a.allData.push(n),a.forEach(function(e){e.triggerNum++,e.triggerNum>=e.minNum&&!1===e.isDel&&(e.fn({nowData:n,allData:a.allData}),"once"===i&&(e.isDel=!0,e.fn=function(){})),"function"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()&&(e.data=n,t(e))}),"once"===i)){var c=!0;a.forEach(function(e){!1===e.isDel&&(c=!1)}),c&&(a.length=0)}}},{key:"on",value:function(e,n,t){this._bind(e,n,t,this.event)}},{key:"once",value:function(e,n,t){this._bind(e,n,t,this.eventOne)}},{key:"off",value:function(e,n){e?(this._cancel(e,n,this.event),this._cancel(e,n,this.eventOne)):(this._cancelAll(this.event),this._cancelAll(this.eventOne))}},{key:"emit",value:function(e,n,t){this._trigger(e,n,t,this.event),this._trigger(e,n,t,this.eventOne,"once")}},{key:"arrToJson",value:function(e){var n={};return e.forEach(function(e,t){e.name?n[e.name]=e:n[t]=e}),n}}]),e}()});
"use strict";var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Super=function(){function e(){_classCallCheck(this,e),this.event={},this.eventOne={}}return _createClass(e,[{key:"_bind",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments[3],i=a[e];i||(i=[],a[e]=i),i.push({isDel:!1,minNum:t,triggerNum:0,fn:n})}},{key:"_cancel",value:function(e,n,t){var a=t[e];a&&(n&&n>=1?a.splice(n-1,1,{isDel:!0,fn:function(){}}):a.length=0)}},{key:"_cancelAll",value:function(e){Object.keys(e).forEach(function(n){e[n].length=0})}},{key:"_trigger",value:function(e,n,t,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=a[e];if(l&&(l.allData||(l.allData=[]),l.allData.push(n),l.forEach(function(e){e.triggerNum++,e.triggerNum>=e.minNum&&!1===e.isDel&&(e.fn({nowData:n,allData:l.allData}),i&&(e.isDel=!0,e.fn=function(){})),"function"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()&&(e.data=n,t(e))}),i)){var c=!0;l.forEach(function(e){!1===e.isDel&&(c=!1)}),c&&(l.length=0)}}},{key:"on",value:function(e,n,t){this._bind(e,n,t,this.event)}},{key:"one",value:function(e,n,t){this._bind(e,n,t,this.eventOne)}},{key:"off",value:function(e,n){e?(this._cancel(e,n,this.event),this._cancel(e,n,this.eventOne)):(this._cancelAll(this.event),this._cancelAll(this.eventOne))}},{key:"emit",value:function(e,n,t){this._trigger(e,n,t,this.event),this._trigger(e,n,t,this.eventOne,!0)}},{key:"arrToJson",value:function(e){var n={};return e.forEach(function(e,t){e.name?n[e.name]=e:n[t]=e}),n}}]),e}();module.exports=new Super;